<div class="search-container">
  <div class="search-header">
    <div class="search-input-wrapper">
      <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
      <input 
        type="text" 
        class="search-input" 
        placeholder="¿Qué quieres escuchar?"
        (input)="onSearchInput($event)"
        autofocus>
    </div>
  </div>

  <div class="search-content" *ngIf="hasSearched">
    <div class="search-tabs">
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'tracks'"
        (click)="setActiveTab('tracks')">
        Canciones ({{ searchResults.tracks.length }})
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'albums'"
        (click)="setActiveTab('albums')">
        Álbumes ({{ searchResults.albums.length }})
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'artists'"
        (click)="setActiveTab('artists')">
        Artistas ({{ searchResults.artists.length }})
      </button>
    </div>

    <div class="search-results">
      <!-- TRACKS -->
      <div class="results-section" *ngIf="activeTab === 'tracks'">
        <div class="results-grid tracks-grid">
          <div 
            *ngFor="let track of searchResults.tracks" 
            class="track-item"
            (click)="playTrack(track)">
            <img [src]="track.imageUrl" alt="Album cover" class="track-image">
            <div class="track-info">
              <div class="track-name">{{ track.name }}</div>
              <div class="track-artist">{{ track.artists }}</div>
            </div>
            <div class="track-album">{{ track.album }}</div>
            <div class="track-duration">{{ formatDuration(track.duration) }}</div>
            <button class="play-button">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M3 1.713a.7.7 0 011.05-.607l10.89 6.288a.7.7 0 010 1.212L4.05 14.894A.7.7 0 013 14.288V1.713z"/>
              </svg>
            </button>
          </div>
        </div>
        <div *ngIf="searchResults.tracks.length === 0" class="no-results">
          <p>No se encontraron canciones</p>
        </div>
      </div>

      <!-- ALBUMS -->
      <div class="results-section" *ngIf="activeTab === 'albums'">
        <div class="results-grid albums-grid">
          <div 
            *ngFor="let album of searchResults.albums" 
            class="album-card"
            (click)="playAlbum(album)">
            <div class="album-cover-wrapper">
              <img [src]="album.imageUrl" alt="Album cover" class="album-cover">
              <div class="album-play-overlay">
                <button class="album-play-button">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M8 5.14v14l11-7-11-7z"/>
                  </svg>
                </button>
              </div>
            </div>
            <div class="album-info">
              <div class="album-name">{{ album.name }}</div>
              <div class="album-artist">{{ album.artist }}</div>
              <div class="album-meta">{{ album.releaseDate?.substring(0, 4) }} • {{ album.totalTracks }} canciones</div>
            </div>
          </div>
        </div>
        <div *ngIf="searchResults.albums.length === 0" class="no-results">
          <p>No se encontraron álbumes</p>
        </div>
      </div>

      <!-- ARTISTS -->
      <div class="results-section" *ngIf="activeTab === 'artists'">
        <div class="results-grid artists-grid">
          <div 
            *ngFor="let artist of searchResults.artists" 
            class="artist-card">
            <div class="artist-image-wrapper">
              <img [src]="artist.imageUrl" alt="Artist" class="artist-image">
            </div>
            <div class="artist-info">
              <div class="artist-name">{{ artist.name }}</div>
              <div class="artist-type">Artista</div>
            </div>
          </div>
        </div>
        <div *ngIf="searchResults.artists.length === 0" class="no-results">
          <p>No se encontraron artistas</p>
        </div>
      </div>
    </div>
  </div>

  <div class="search-placeholder" *ngIf="!hasSearched && !isSearching">
    <div class="placeholder-icon">
      <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <circle cx="11" cy="11" r="8"/>
        <path d="m21 21-4.35-4.35"/>
      </svg>
    </div>
    <h2>Busca tu música favorita</h2>
    <p>Encuentra canciones, álbumes y artistas</p>
  </div>

  <div class="search-loading" *ngIf="isSearching">
    <div class="spinner"></div>
    <p>Buscando...</p>
  </div>
</div>